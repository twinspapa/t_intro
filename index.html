<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width,initial-scale=1,maximum-scale=1.0,user-scalable=no" name="viewport">
  <meta property="og:title" content="Tintro">
  <meta property="og:type" content="website">
  <meta property="og:image" content="./res/img/tintro_share.png">
  <meta property="og:description" content="화제의 모바일 콘텐츠를 한 곳에서!">
  <meta name="description" content="화제의 모바일 콘텐츠를 한 곳에서!">
  <meta name="keywords" content="SKT,SK텔레콤,T인트로,Tintro" />
  <title>T인트로</title>
  <link rel="stylesheet" href="./res/css/common.css">
  <link rel="stylesheet" href="./res/css/swiper.min.css">
  <link rel="stylesheet" href="./res/css/home.css">
</head>

<body id="">
  <header>
    <div id="btn_menu" class="box44 flex">
      <div class="icon_menu">
        <div class="icon_menu_inner"></div>
      </div>
    </div>
    <div id="mypage" class="backdrop_st01">
      <div class="login"></div>
      <div class="logout"></div>
    </div>
    <div id="nav_1" class="mid_bar border_box_all backdrop_st01">
      <nav class="depth_1 swiper-container">
        <ul class="swiper-wrapper"></ul>
      </nav>
    </div>
    <div id="search_wrap" class="backdrop_st01">
      <div id="btn_search" class="flex">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
          <defs>
            <style>
              .a {
                fill: #fff;
                opacity: 0;
              }

              .b {
                fill: #db0017;
              }
            </style>
          </defs>
          <rect class="a" width="24" height="24" />
          <path class="b" d="M27.765,26.54,22.2,20.927A7.927,7.927,0,1,0,21,22.145l5.526,5.577a.856.856,0,0,0,1.208.031A.861.861,0,0,0,27.765,26.54ZM15.974,22.213A6.259,6.259,0,1,1,20.4,20.38,6.222,6.222,0,0,1,15.974,22.213Z"
            transform="translate(-6 -5.987)" />
        </svg>
      </div>
      <form name="search" role="search" action="">
        <input type="search" name="" title="검색어를 입력해주세요." placeholder="검색어를 입력해주세요." class="" autocomplete="off" maxlength="255" autocorrent="off" autocapitalize="off">
        <button class="clear" type="button" name="input_clear">입력된 검색어 삭제</button>
        <button class="searh" type="button" name="button">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <defs>
              <style>
                .a {
                  fill: #fff;
                  opacity: 0;
                }

                .b {
                  fill: #db0017;
                }
              </style>
            </defs>
            <rect class="a" width="24" height="24" />
            <path class="b" d="M27.765,26.54,22.2,20.927A7.927,7.927,0,1,0,21,22.145l5.526,5.577a.856.856,0,0,0,1.208.031A.861.861,0,0,0,27.765,26.54ZM15.974,22.213A6.259,6.259,0,1,1,20.4,20.38,6.222,6.222,0,0,1,15.974,22.213Z"
              transform="translate(-6 -5.987)" />
          </svg>
        </button>
      </form>
      <div class="close"></div>
    </div>
    <div id="nav_2">
      <nav class="depth_2 swiper-container border-box-all">
        <ul class="swiper-wrapper">
          <li class="swiper-slide"><a class="backdrop_st01" href="#game" data-id="game">게임</a></li>
          <li class="swiper-slide"><a class="backdrop_st01" href="#game" data-id="game">게임</a></li>
          <li class="swiper-slide"><a class="backdrop_st01" href="#game" data-id="game">게임</a></li>
          <li class="swiper-slide"><a class="backdrop_st01" href="#game" data-id="game">게임</a></li>
          <li class="swiper-slide"><a class="backdrop_st01" href="#game" data-id="game">게임</a></li>
          <li class="swiper-slide"><a class="backdrop_st01" href="#game" data-id="game">게임</a></li>
          <li class="swiper-slide"><a class="backdrop_st01" href="#game" data-id="game">게임</a></li>
        </ul>
      </nav>
      <a href="" class="news_tag_plus">
        <span class="font_zero">관심 태그 추가하기</span>
      </a>
    </div>
  </header>

  <div id="cnt" class="cnt_slider swiper-container">
    <div class="swiper-wrapper">
      <div class="cnt_el swiper-slide">
        <div id="prev_page"></div>
      </div>
      <div class="cnt_el swiper-slide">
        <div id="active_page"></div>
      </div>
      <div class="cnt_el swiper-slide">
        <div id="next_page"></div>
      </div>
    </div>
  </div>
  <footer>
    <div class="ad_wrap margin">
      <div ad-style="" ad-data-id="footer" ad-data-cate="">
        <img src="./res/img/dummy_ad_bnr_16×9.png" alt="광고타이틀출력">
      </div>
    </div>
    <div class="info margin">
      <a href="">이용약관</a>
      <a href="">개인정보처리방침</a>
      <a href="">고객센터</a>
    </div>
    <div class="copyright margin">ⓒ SK텔레콤 Crop.</div>
  </footer>
  <!-- <script src="./res/js/jquery-3.5.0.slim.min.js" charset="utf-8"></script> -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="./res/js/swiper.min.js" charset="utf-8"></script>
  <script>

// Start [Global 변수 선언]
  var user_cate = {
        game: "게임",
        car: "자동차",
        shopping: "쇼핑",
        home: "홈",
        news: "뉴스",
        enter: "연예",
        sports: "스포츠"
      },
      $cnt_wrap = $('#cnt').children().eq(0),
      $nav_1 = $('#nav_1 .swiper-wrapper'),
      cate_length = Object.keys(user_cate).length;
// End [변수 선언]


// Start [1depth 메뉴 로드 ->> cate_load()]

  var start_page_id = function() {
    var page_hash = location.hash;

    if(page_hash == "") {
      return "home";
    } else {
      return page_hash.replace('#','');
    }
  }

  var cate_load = function() {

    for (var i = 0; i < cate_length; i++) {
      var data = Object.keys(user_cate)[i],
          data_name = user_cate[Object.keys(user_cate)[i]];

      $nav_1.append("<li id="+data+" class='swiper-slide'><a href='#'>"+data_name+"</a></li>");
    }

    var depth_1 = new Swiper('.depth_1', {
      slidesPerView: 'auto',
      spaceBetween: 0,
      centeredSlides: false,
      initialSlide: 3,
      hashNavigation: {
        watchState: true,
        replaceState: true,
      },
      freeMode: true
    });

  }
// << End "1depth 메뉴"


  var page_id = function() {
    $nav_1.children('.on').attr('id');
  }

  var next_el_id = function() {
    var $next_el = $nav_1.children('.on').next();
    if($next_el){
      $next_el.attr('id');
    } else {
      $nav_1.children().first().attr('id');
    }
  }

  var prev_el_id = function() {
    var $prev_el = $nav_1.children('.on').prev();
    if($prev_el){
      $prev_el.attr('id');
    } else {
      $nav_1.children().last().attr('id');
    }
  }


  var page_load = function(direction) {
    var $el = $('#'+direction+'_page');

    if(direction == 'prev') {
      $el.load("./cnt/"+ prev_el_id + ".html");
      $el.parent().attr('data-id',prev_el_id);
    } else if (direction == 'next') {
      $el.load("./cnt/"+ next_el_id + ".html");
      $el.parent().attr('data-id',next_el_id);
    } else if (direction == 'acitve'){
      $el.load("./cnt/"+ page_id + ".html");
      $el.parent().attr('data-id',page_id);
    } else {
      alert('페이지로드에 실패하였습니다. 페이지를 새로고침해주세요.')
    }
  }

  var nav_1_reset_on = function() {
    var active_id = $cnt_wrap.children('.swiper-slide-active').attr('data-id');

    $nav_1.children().removeClass('on');
    $nav_1.children('#'+active_id).addClass('on');
  }

  $(function() {
    $("#btn_menu").click(function() {
      $(this).toggleClass('on');
      $("#mypage").toggleClass('on');
    });

    cate_load();
    $('body').attr('id', 'pid_'+ start_page_id());
    $('#'+start_page_id()).addClass('on')
    page_load('active');
    page_load('next');
    page_load('prev');
  });


// 서브메뉴 슬라이더
    var depth_2 = new Swiper('.depth_2', {
      slidesPerView: 'auto',
      spaceBetween: 16,
      centeredSlides: false,
      initialSlide: 0,
      hashNavigation: {
        watchState: true,
        replaceState: true,
      },
      freeMode: true
    });
// 서브메뉴 슬라이더 끝


// "컨텐츠 슬라이더" START >>
  var cnt_move = function () {
    var $cnt_el = $cnt_wrap.children(),
        $active_el = $cnt_el.eq(1),
        $next_el = $cnt_el.eq(2),
        $prev_el = $cnt_el.eq(0);

    if($prev_el.hasClass('swiper-slide-active')) {
      page_load(prev);
      $cnt_wrap.prepend($next_el);
    } else if ($next_el.hasClass('swiper-slide-active')) {
      page_load(next);
      $cnt_wrap.append($prev_el);
    }

    $prev_el.children().eq(0).attr('class', 'swiper-slide swiper-slide-prev');
    $active_el.attr('class', 'swiper-slide swiper-slide-active');
    $next_el.attr('class', 'swiper-slide swiper-slide-next');
  }

    var cnt_slider = new Swiper('.cnt_slider', {
      slidesPerView: 1,
      spaceBetween: 0,
      centeredSlides: true,
      initialSlide: 1,
      autoHeight: true,
      freeMode: false,
      on: {
        slideChangeTransitionEnd: function () {
          cnt_move();
          nav_1_reset_on();
        },
      }
    });
// << END "컨텐츠 슬라이더"
  </script>
</body>

</html>
